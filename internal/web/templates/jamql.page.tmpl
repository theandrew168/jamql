{{template "base" .}}

<!--
TODO flash messages:
error - empty filters
error - on search
error - on save
success - on save
-->

{{define "main"}}
<div class="jamql-bg">
	<div class="jamql">
		<!-- element for flash messages -->
		<div id="flash"></div>

		<form>
			<!-- filter boxes -->
			{{range .}}
				{{template "filter" .}}
			{{end}}

			<!-- add filter button -->
			<div class="filter-add">
				<button class="filter-add-button" type="button">Add Filter</button>
			</div>

			<!-- save / search buttons -->
			<div class="save-search">
				<button class="button active" hx-post="/search" hx-swap="innerHTML" hx-target="#tracks">
					<span>Search</span>
				</button>
				<button class="button inactive" hx-post="/save" hx-swap="innerHTML" hx-target="#flash">
					<span>Save</span>
				</button>
			</div>
		</form>

		<!-- tracks -->
		<div id="tracks">
			<!-- no tracks placeholder -->
			<div class="no-tracks">
				<p>Search to see some tracks!</p>
			</div>
		</div>

	</div>
</div>
{{end}}
